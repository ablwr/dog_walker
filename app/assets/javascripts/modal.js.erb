$(function(){
  var appt_id,
      pet_name,
      div_id,
      id;

  //to send texts to client after dog is walked
  $("#client-appts").on('click', '#modal-button', function(event){
    event.preventDefault();
    appt_id = $('#appt').val($(this).data("id"));
    pet_name = $('#text').val($(this).data("value"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#myModal').modal('toggle');
  });

  //to delete an appointment without texting client
  $(".table").on('click', '#delete-appt', function(){
    id = $(this).data("id");
    div_id = "#"+$(this).data("id");
    $("#create-appt").html("");
    $(div_id).remove();
    $.ajax({
      url:'/appointments/'+id, 
      type: 'DELETE'
    });
  });

  //Opens the cancel appointment modal
  $(".appointment").on('click', '#cancel-modal', function(event){
    event.preventDefault();
    appt_id = $('#appt').val($(this).data("id"));
    pet_name = $('#text').val($(this).data("value"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#cancelModal').modal('toggle');
  });

  //to cancel and send text 
  $("#cancel-appt").click(function(){
    $(div_id).remove();
    $('#myModal').modal('toggle');
  });

  //to delete appointment and not text 
  $("#no-text").click(function(){
    $(div_id).remove();
    $('#myModal').modal('toggle');
    $.ajax({
      url:'/appointments/'+id, 
      type: 'DELETE'
    });
  });

  //opens walker email modal
  $(".contact-walker").on('click', '#email-modal-button', function(event){
    event.preventDefault();
    var walker_id = $('#walker').val($(this).data("id"));
    var walker_name = $('#text').val($(this).data("value"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#myModal').modal('toggle');
  });

  //closes email modal
  $("#send-email").click(function(){ 
    $('#myModal').modal('toggle');
  });

  //opens new pet modal for walkers
  $(".client").on('click', '#pet-modal', function(event){
    event.preventDefault();
    var household_id = $('#household').val($(this).data("id"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#petModal').modal('toggle');
  });

  //opens new pet modal for owners
  $(".owner").on('click', '#pet-modal', function(event){
    event.preventDefault();
    var household_id = $('#household').val($(this).data("id"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#petModal').modal('toggle');
  });

  //opens new pet modal for households
  $(".household").on('click', '#pet-modal', function(event){
    event.preventDefault();
    var household_id = $('#household').val($(this).data("id"));
    div_id = "#"+$(this).data("id");
    id = $(this).data("id");
    console.log(id);
    $('#petModal').modal('toggle');
  });
});


